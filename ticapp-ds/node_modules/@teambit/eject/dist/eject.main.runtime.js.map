{"version":3,"sources":["eject.main.runtime.ts"],"names":["EjectMain","provider","cli","workspace","loggerMain","logger","createLogger","EjectAspect","id","consumer","isLegacy","unregister","register","EjectCmd","MainRuntime","CLIAspect","WorkspaceAspect","LoggerAspect","addRuntime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEO,MAAMA,SAAN,CAAgB;AAKA,eAARC,QAAQ,CAAC,CAACC,GAAD,EAAMC,SAAN,EAAiBC,UAAjB,CAAD,EAAiE;AACpF,UAAMC,MAAM,GAAGD,UAAU,CAACE,YAAX,CAAwBC,qBAAYC,EAApC,CAAf;;AACA,QAAIL,SAAS,IAAI,CAACA,SAAS,CAACM,QAAV,CAAmBC,QAArC,EAA+C;AAC7CR,MAAAA,GAAG,CAACS,UAAJ,CAAe,OAAf;AACAT,MAAAA,GAAG,CAACU,QAAJ,CAAa,KAAIC,oBAAJ,EAAaV,SAAb,EAAwBE,MAAxB,CAAb;AACD;;AAED,WAAO,IAAIL,SAAJ,EAAP;AACD;;AAboB;;;gCAAVA,S,aACMc,kB;gCADNd,S,kBAGW,CAACe,gBAAD,EAAYC,oBAAZ,EAA6BC,sBAA7B,C;;AAaxBV,qBAAYW,UAAZ,CAAuBlB,SAAvB","sourcesContent":["import { CLIAspect, CLIMain, MainRuntime } from '@teambit/cli';\nimport { LoggerAspect, LoggerMain } from '@teambit/logger';\nimport WorkspaceAspect, { Workspace } from '@teambit/workspace';\nimport { EjectCmd } from './eject-cmd';\nimport { EjectAspect } from './eject.aspect';\n\nexport class EjectMain {\n  static runtime = MainRuntime;\n\n  static dependencies = [CLIAspect, WorkspaceAspect, LoggerAspect];\n\n  static async provider([cli, workspace, loggerMain]: [CLIMain, Workspace, LoggerMain]) {\n    const logger = loggerMain.createLogger(EjectAspect.id);\n    if (workspace && !workspace.consumer.isLegacy) {\n      cli.unregister('eject');\n      cli.register(new EjectCmd(workspace, logger));\n    }\n\n    return new EjectMain();\n  }\n}\n\nEjectAspect.addRuntime(EjectMain);\n"]}