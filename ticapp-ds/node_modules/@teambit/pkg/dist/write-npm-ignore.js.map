{"version":3,"sources":["write-npm-ignore.ts"],"names":["writeNpmIgnore","capsule","envs","env","getEnv","component","npmIgnoreEntries","getNpmIgnore","length","NPM_IGNORE_FILE","npmIgnorePath","path","npmIgnoreEntriesStr","join","fs","appendFile"],"mappings":";;;;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAIO,eAAeA,cAAf,CAA8BC,OAA9B,EAAgDC,IAAhD,EAA+E;AAAA;;AACpF,QAAMC,GAAG,GAAGD,IAAI,CAACE,MAAL,CAAYH,OAAO,CAACI,SAApB,EAA+BF,GAA3C;AACA,QAAMG,gBAAgB,wBAAGH,GAAG,CAACI,YAAP,sDAAG,uBAAAJ,GAAG,EAAgB;AAAEE,IAAAA,SAAS,EAAEJ,OAAO,CAACI,SAArB;AAAgCJ,IAAAA;AAAhC,GAAhB,CAA5B;;AACA,MAAI,CAACK,gBAAD,IAAqB,CAACA,gBAAgB,CAACE,MAA3C,EAAmD;AACjD;AACD;;AACD,QAAMC,eAAe,GAAG,YAAxB;AACA,QAAMC,aAAa,GAAG,kBAAKT,OAAO,CAACU,IAAb,EAAmBF,eAAnB,CAAtB;AACA,QAAMG,mBAAmB,GAAI,KAAIN,gBAAgB,CAACO,IAAjB,CAAsB,IAAtB,CAA4B,EAA7D;AACA,QAAMC,mBAAGC,UAAH,CAAcL,aAAd,EAA6BE,mBAA7B,CAAN;AACD","sourcesContent":["import { join } from 'path';\nimport fs from 'fs-extra';\nimport { EnvsMain, PackageEnv } from '@teambit/envs';\nimport { Capsule } from '@teambit/isolator';\n\nexport async function writeNpmIgnore(capsule: Capsule, envs: EnvsMain): Promise<void> {\n  const env = envs.getEnv(capsule.component).env as PackageEnv;\n  const npmIgnoreEntries = env.getNpmIgnore?.({ component: capsule.component, capsule });\n  if (!npmIgnoreEntries || !npmIgnoreEntries.length) {\n    return;\n  }\n  const NPM_IGNORE_FILE = '.npmignore';\n  const npmIgnorePath = join(capsule.path, NPM_IGNORE_FILE);\n  const npmIgnoreEntriesStr = `\\n${npmIgnoreEntries.join('\\n')}`;\n  await fs.appendFile(npmIgnorePath, npmIgnoreEntriesStr);\n}\n"]}