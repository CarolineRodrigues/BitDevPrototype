{"version":3,"sources":["webpack.dev.config.ts"],"names":["matchNothingRegex","clientHost","process","env","WDS_SOCKET_HOST","clientPath","WDS_SOCKET_PATH","port","WDS_SOCKET_PORT","publicUrlOrPath","NODE_ENV","sep","moduleFileExtensions","devConfig","workspaceDir","entryFiles","title","resolveWorkspacePath","relativePath","path","resolve","host","HOST","mode","snapshot","managedPaths","devtool","entry","main","output","filename","pathinfo","publicPath","chunkFilename","devtoolModuleFilenameTemplate","info","absoluteResourcePath","infrastructureLogging","level","stats","errorDetails","devServer","allowedHosts","static","directory","staticOptions","serveIndex","watch","compress","hot","historyApiFallback","disableDotRule","index","client","webSocketURL","hostname","pathname","onBeforeSetupMiddleware","wds","app","use","onAfterSetupMiddleware","devMiddleware","slice","extensions","map","ext","alias","react","require","fallback","fs","stream","module","unsafeCache","rules","test","fullySpecified","enforce","include","descriptionData","componentId","value","exclude","loader","options","configFile","babelrc","presets","plugins","stylesRegexps","sassModuleRegex","modules","localIdentName","sourceMap","sassNoModuleRegex","lessModuleRegex","lessNoModuleRegex","cssModuleRegex","cssNoModulesRegex","ReactRefreshWebpackPlugin","HtmlWebpackPlugin","inject","templateContent","chunks","ProvidePlugin"],"mappings":"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","sourcesContent":["import { ProvidePlugin } from 'webpack';\nimport * as stylesRegexps from '@teambit/webpack.modules.style-regexps';\nimport { pathNormalizeToLinux } from '@teambit/legacy/dist/utils';\nimport { WebpackConfigWithDevServer } from '@teambit/webpack';\n\nimport HtmlWebpackPlugin from 'html-webpack-plugin';\nimport ReactRefreshWebpackPlugin from '@pmmmwh/react-refresh-webpack-plugin';\nimport errorOverlayMiddleware from 'react-dev-utils/errorOverlayMiddleware';\nimport evalSourceMapMiddleware from 'react-dev-utils/evalSourceMapMiddleware';\nimport noopServiceWorkerMiddleware from 'react-dev-utils/noopServiceWorkerMiddleware';\nimport redirectServedPath from 'react-dev-utils/redirectServedPathMiddleware';\nimport getPublicUrlOrPath from 'react-dev-utils/getPublicUrlOrPath';\nimport path, { sep } from 'path';\nimport { html } from './html';\n\n/*\n * Webpack config for the bit ui\n * i.e. `bit start --dev`,\n */\n\nconst matchNothingRegex = 'a^';\nconst clientHost = process.env.WDS_SOCKET_HOST;\nconst clientPath = process.env.WDS_SOCKET_PATH; // default is '/sockjs-node';\nconst port = process.env.WDS_SOCKET_PORT;\n\n// const reactRefreshRuntimeEntry = require.resolve('react-refresh/runtime');\n// const reactRefreshWebpackPluginRuntimeEntry = require.resolve(\n//   '@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils'\n// );\n\nconst publicUrlOrPath = getPublicUrlOrPath(process.env.NODE_ENV === 'development', sep, `${sep}public`);\n\nconst moduleFileExtensions = [\n  'web.mjs',\n  'mjs',\n  'web.js',\n  'js',\n  'web.ts',\n  'ts',\n  'web.tsx',\n  'tsx',\n  'json',\n  'web.jsx',\n  'jsx',\n];\n\nexport function devConfig(workspaceDir, entryFiles, title): WebpackConfigWithDevServer {\n  const resolveWorkspacePath = (relativePath) => path.resolve(workspaceDir, relativePath);\n\n  // Host\n  const host = process.env.HOST || 'localhost';\n\n  // Required for babel-preset-react-app\n  process.env.NODE_ENV = 'development';\n\n  return {\n    // Environment mode\n    mode: 'development',\n    // improves HMR - assume node_modules might change\n    snapshot: { managedPaths: [] },\n\n    devtool: 'inline-source-map',\n\n    // Entry point of app\n    entry: {\n      main: entryFiles,\n    },\n\n    output: {\n      // Development filename output\n      filename: 'static/js/[name].bundle.js',\n\n      pathinfo: true,\n\n      path: resolveWorkspacePath('/'),\n\n      publicPath: publicUrlOrPath,\n\n      chunkFilename: 'static/js/[name].chunk.js',\n\n      // point sourcemap entries to original disk locations (format as URL on windows)\n      devtoolModuleFilenameTemplate: (info) => pathNormalizeToLinux(path.resolve(info.absoluteResourcePath)),\n\n      // this defaults to 'window', but by setting it to 'this' then\n      // module chunks which are built will work in web workers as well.\n      // Commented out to use the default (self) as according to tobias with webpack5 self is working with workers as well\n      // globalObject: 'this',\n    },\n\n    infrastructureLogging: {\n      level: 'error',\n    },\n\n    stats: {\n      errorDetails: true,\n    },\n\n    devServer: {\n      allowedHosts: 'all',\n\n      static: [\n        {\n          directory: resolveWorkspacePath(publicUrlOrPath),\n          staticOptions: {},\n          // Don't be confused with `dev.publicPath`, it is `publicPath` for static directory\n          // Can be:\n          // publicPath: ['/static-public-path-one/', '/static-public-path-two/'],\n          publicPath: publicUrlOrPath,\n          // Can be:\n          // serveIndex: {} (options for the `serveIndex` option you can find https://github.com/expressjs/serve-index)\n          serveIndex: true,\n          // Can be:\n          // watch: {} (options for the `watch` option you can find https://github.com/paulmillr/chokidar)\n          watch: true,\n        },\n      ],\n\n      // Enable compression\n      compress: true,\n\n      // Enable hot reloading\n      hot: true,\n\n      host,\n\n      historyApiFallback: {\n        disableDotRule: true,\n        index: publicUrlOrPath,\n      },\n\n      client: {\n        webSocketURL: {\n          hostname: clientHost,\n          pathname: clientPath,\n          port,\n        },\n      },\n\n      onBeforeSetupMiddleware(wds) {\n        const { app } = wds;\n        // Keep `evalSourceMapMiddleware` and `errorOverlayMiddleware`\n        // middlewares before `redirectServedPath` otherwise will not have any effect\n        // This lets us fetch source contents from webpack for the error overlay\n        // @ts-ignore @types/wds mismatch\n        app.use(evalSourceMapMiddleware(wds));\n        // This lets us open files from the runtime error overlay.\n        app.use(errorOverlayMiddleware());\n      },\n\n      onAfterSetupMiddleware({ app }) {\n        // Redirect to `PUBLIC_URL` or `homepage` from `package.json` if url not match\n        app.use(redirectServedPath(publicUrlOrPath));\n\n        // This service worker file is effectively a 'no-op' that will reset any\n        // previous service worker registered for the same host:port combination.\n        // We do this in development to avoid hitting the production cache if\n        // it used the same host and port.\n        // https://github.com/facebook/create-react-app/issues/2272#issuecomment-302832432\n        app.use(noopServiceWorkerMiddleware(publicUrlOrPath));\n      },\n\n      devMiddleware: {\n        // forward static files\n        publicPath: publicUrlOrPath.slice(0, -1),\n      },\n    },\n\n    resolve: {\n      // These are the reasonable defaults supported by the Node ecosystem.\n      // We also include JSX as a common component filename extension to support\n      // some tools, although we do not recommend using it, see:\n      // https://github.com/facebook/create-react-app/issues/290\n      // `web` extension prefixes have been added for better support\n      // for React Native Web.\n      extensions: moduleFileExtensions.map((ext) => `.${ext}`),\n      alias: {\n        react: require.resolve('react'),\n        'react-dom/server': require.resolve('react-dom/server'),\n        'react-dom': require.resolve('react-dom'),\n        // 'react-refresh/runtime': require.resolve('react-refresh/runtime'),\n      },\n      fallback: {\n        fs: false,\n        path: require.resolve('path-browserify'),\n        stream: false,\n        process: false,\n      },\n    },\n\n    module: {\n      // Webpack by default includes node_modules under its managed paths which cause the whole directory to be cached\n      // Watch mode requires us to turn off unsafeCache as well\n      // this de-optimizes the dev build but ensures hmr works when writing/linking into node modules.\n      // However we do not lose the caching entirely like cache: false\n      unsafeCache: false,\n      rules: [\n        {\n          test: /\\.m?js/,\n          resolve: {\n            fullySpecified: false,\n          },\n        },\n        {\n          test: /\\.js$/,\n          enforce: 'pre',\n          include: /node_modules/,\n          // only apply to packages with componentId in their package.json (ie. bit components)\n          descriptionData: { componentId: (value) => !!value },\n          use: [require.resolve('@pmmmwh/react-refresh-webpack-plugin/loader'), require.resolve('source-map-loader')],\n        },\n        {\n          test: /\\.(js|jsx|tsx|ts)$/,\n          exclude: /node_modules/,\n          include: workspaceDir,\n          use: [\n            require.resolve('@pmmmwh/react-refresh-webpack-plugin/loader'),\n            {\n              loader: require.resolve('babel-loader'),\n              options: {\n                configFile: false,\n                babelrc: false,\n                presets: [\n                  // Preset includes JSX, TypeScript, and some ESnext features\n                  require.resolve('babel-preset-react-app'),\n                ],\n                plugins: [require.resolve('react-refresh/babel')],\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.sassModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            {\n              loader: require.resolve('css-loader'),\n              options: {\n                modules: {\n                  localIdentName: '[name]__[local]--[hash:base64:5]',\n                },\n                sourceMap: true,\n              },\n            },\n            {\n              loader: require.resolve('sass-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.sassNoModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            require.resolve('css-loader'),\n            {\n              loader: require.resolve('sass-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.lessModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            {\n              loader: require.resolve('css-loader'),\n              options: {\n                modules: {\n                  localIdentName: '[name]__[local]--[hash:base64:5]',\n                },\n                sourceMap: true,\n              },\n            },\n            {\n              loader: require.resolve('less-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.lessNoModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            require.resolve('css-loader'),\n            {\n              loader: require.resolve('less-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.cssModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            {\n              loader: require.resolve('css-loader'),\n              options: {\n                modules: {\n                  localIdentName: '[name]__[local]--[hash:base64:5]',\n                },\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.cssNoModulesRegex,\n          use: [require.resolve('style-loader'), require.resolve('css-loader')],\n        },\n      ],\n    },\n\n    plugins: [\n      new ReactRefreshWebpackPlugin({\n        // we use '@pmmmwh/react-refresh-webpack-plugin/loader' directly where relevant.\n        // FYI, original defaults of the plugin are:\n        // include: /\\.([cm]js|[jt]sx?|flow)$/i, exclude: /node_modules/,\n        include: matchNothingRegex,\n      }),\n      // Re-generate index.html with injected script tag.\n      // The injected script tag contains a src value of the\n      // filename output defined above.\n      new HtmlWebpackPlugin({\n        inject: true,\n        templateContent: html(title || 'My component workspace'),\n        chunks: ['main'],\n        filename: 'index.html',\n      }),\n      new ProvidePlugin({\n        process: require.resolve('process/browser'),\n      }),\n    ],\n  };\n}\n"]}