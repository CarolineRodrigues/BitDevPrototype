{"version":3,"sources":["webpack.ssr.config.ts"],"names":["createWebpackConfig","workspaceDir","entryFiles","publicDir","baseConfig","ssrConfig","createSsrConfig","combined","target","devtool","output","path","resolve","publicPath","libraryTarget","filename"],"mappings":";;;;;;;;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEe,SAASA,mBAAT,CACbC,YADa,EAEbC,UAFa,EAGbC,SAHa,EAIE;AACf,QAAMC,UAAU,GAAG,4BAAiBH,YAAjB,EAA+BC,UAA/B,CAAnB;AACA,QAAMG,SAAS,GAAGC,eAAe,CAACL,YAAD,EAAeE,SAAf,CAAjC;AAEA,QAAMI,QAAQ,GAAG,2BAAMH,UAAN,EAAkBC,SAAlB,CAAjB;AAEA,SAAOE,QAAP;AACD;;AAED,SAASD,eAAT,CAAyBL,YAAzB,EAA+CE,SAA/C,EAAkE;AAChE,QAAME,SAAwB,GAAG;AAC/BG,IAAAA,MAAM,EAAE,MADuB;AAE/BC,IAAAA,OAAO,EAAE,uBAFsB;AAEG;AAElCC,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAEA,gBAAKC,OAAL,CAAaX,YAAb,EAA2BE,SAA3B,EAAsC,KAAtC,CADA;AAENU,MAAAA,UAAU,EAAE,cAFN;AAGNC,MAAAA,aAAa,EAAE,UAHT;AAINC,MAAAA,QAAQ,EAAE;AAJJ,KAJuB,CAW/B;AACA;AACA;;AAb+B,GAAjC;AAgBA,SAAOV,SAAP;AACD","sourcesContent":["import { Configuration } from 'webpack';\nimport path from 'path';\nimport { merge } from 'webpack-merge';\n\nimport createBaseConfig from './webpack.base.config';\n\nexport default function createWebpackConfig(\n  workspaceDir: string,\n  entryFiles: string[],\n  publicDir: string\n): Configuration {\n  const baseConfig = createBaseConfig(workspaceDir, entryFiles);\n  const ssrConfig = createSsrConfig(workspaceDir, publicDir);\n\n  const combined = merge(baseConfig, ssrConfig);\n\n  return combined;\n}\n\nfunction createSsrConfig(workspaceDir: string, publicDir: string) {\n  const ssrConfig: Configuration = {\n    target: 'node',\n    devtool: 'eval-cheap-source-map', // TODO\n\n    output: {\n      path: path.resolve(workspaceDir, publicDir, 'ssr'),\n      publicPath: '/public/ssr/',\n      libraryTarget: 'commonjs',\n      filename: 'index.js',\n    },\n\n    // // no optimizations for ssr at this point,\n    // // especially no chunks.\n    // optimization: { },\n  };\n\n  return ssrConfig;\n}\n"]}