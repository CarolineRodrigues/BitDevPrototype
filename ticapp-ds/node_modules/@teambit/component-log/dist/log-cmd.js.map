{"version":3,"sources":["log-cmd.ts"],"names":["LogCmd","constructor","componentLog","docsDomain","description","report","id","remote","parents","logs","getLogsWithParents","join","getLogs","reverse","map","paintLog"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAGe,MAAMA,MAAN,CAAgC;AAW5B;AAGjBC,EAAAA,WAAW,CAASC,YAAT,EAAyCC,UAAzC,EAA6D;AAAA,SAApDD,YAAoD,GAApDA,YAAoD;AAAA,kDAbjE,UAaiE;AAAA,8DAZrD,oCAYqD;AAAA;AAAA,mDAVhE,MAUgE;AAAA,mDAThE,EASgE;AAAA,qDAR9D,CACR,CAAC,GAAD,EAAM,QAAN,EAAgB,gCAAhB,CADQ,EAER,CAAC,EAAD,EAAK,SAAL,EAAgB,2CAAhB,CAFQ,CAQ8D;AAAA,uDAJ5D,IAI4D;AAAA,sDAH7D,IAG6D;AAAA,2DAFxD,IAEwD;AACtE,SAAKE,WAAL,GAAoB,8CAA6CD,UAAW,8BAA5E;AACD;;AAEW,QAANE,MAAM,CAAC,CAACC,EAAD,CAAD,EAAiB;AAAEC,IAAAA,MAAM,GAAG,KAAX;AAAkBC,IAAAA,OAAO,GAAG;AAA5B,GAAjB,EAA6F;AACvG,QAAIA,OAAJ,EAAa;AACX,YAAMC,IAAI,GAAG,MAAM,KAAKP,YAAL,CAAkBQ,kBAAlB,CAAqCJ,EAArC,CAAnB;AACA,aAAOG,IAAI,CAACE,IAAL,CAAU,IAAV,CAAP;AACD;;AACD,UAAMF,IAAI,GAAG,MAAM,KAAKP,YAAL,CAAkBU,OAAlB,CAA0BN,EAA1B,EAA8BC,MAA9B,CAAnB;AACA,WAAOE,IAAI,CAACI,OAAL,GAAeC,GAAf,CAAmBC,oBAAnB,EAA6BJ,IAA7B,CAAkC,IAAlC,CAAP;AACD;;AAzB4C","sourcesContent":["import { Command, CommandOptions } from '@teambit/cli';\nimport { paintLog } from '@teambit/legacy/dist/cli/chalk-box';\nimport { ComponentLogMain } from './component-log.main.runtime';\n\nexport default class LogCmd implements Command {\n  name = 'log <id>';\n  shortDescription = 'show components(s) version history';\n  description: string;\n  group = 'info';\n  alias = '';\n  options = [\n    ['r', 'remote', 'show log of a remote component'],\n    ['', 'parents', 'EXPERIMENTAL. show parents and lanes data'],\n  ] as CommandOptions;\n  migration = true;\n  remoteOp = true; // should support log against remote\n  skipWorkspace = true;\n\n  constructor(private componentLog: ComponentLogMain, docsDomain: string) {\n    this.description = `show components(s) tag history.\\n  https://${docsDomain}/reference/cli-reference#log`;\n  }\n\n  async report([id]: [string], { remote = false, parents = false }: { remote: boolean; parents: boolean }) {\n    if (parents) {\n      const logs = await this.componentLog.getLogsWithParents(id);\n      return logs.join('\\n');\n    }\n    const logs = await this.componentLog.getLogs(id, remote);\n    return logs.reverse().map(paintLog).join('\\n');\n  }\n}\n"]}