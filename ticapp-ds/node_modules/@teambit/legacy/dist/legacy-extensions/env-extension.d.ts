import { ComponentOrigin } from '../consumer/bit-map/component-map';
import ConsumerComponent from '../consumer/component';
import DataToPersist from '../consumer/component/sources/data-to-persist';
import ComponentConfig, { ILegacyWorkspaceConfig } from '../consumer/config';
import { EnvExtensionObject } from '../consumer/config/abstract-config';
import ComponentOverrides from '../consumer/config/component-overrides';
import { ComponentWithDependencies } from '../scope';
import Scope from '../scope/scope';
import BaseExtension from './base-extension';
import { EnvExtensionModel, EnvExtensionProps, EnvExtensionSerializedModel, EnvLoadArgsProps, EnvType } from './env-extension-types';
export declare type EnvPackages = {
    dependencies?: Record<string, any>;
    devDependencies?: Record<string, any>;
    peerDependencies?: Record<string, any>;
};
export default class EnvExtension extends BaseExtension {
    envType: EnvType;
    dynamicPackageDependencies: Record<string, any> | undefined;
    dataToPersist: DataToPersist;
    /**
     * Return the action
     */
    get action(): Function | undefined;
    /**
     * return old actions (to support old compilers / testers which uses run / compile functions)
     */
    get oldAction(): Function | null | undefined;
    constructor(extensionProps: EnvExtensionProps);
    install(scope: Scope, opts: {
        verbose: boolean;
        dontPrintEnvMsg?: boolean;
    }, context?: Record<string, any>): Promise<ComponentWithDependencies[] | null | undefined>;
    toModelObject(): EnvExtensionModel;
    toObject(): Record<string, any>;
    /**
     * Get a bit.json representation of the env instance
     * @param {string} ejectedEnvDirectory - The base path of where the env config files are stored
     * $FlowFixMe seems to be an issue opened for this https://github.com/facebook/flow/issues/4953
     */
    toBitJsonObject(): {
        [key: string]: EnvExtensionObject;
    };
    reload(scopePath: string, context?: Record<string, any>): Promise<void>;
    /**
     * Loading from props (usually from bit.json)
     * @param {*} props
     * $FlowFixMe seems to be an issue opened for this https://github.com/facebook/flow/issues/4953
     */
    static load(props: EnvLoadArgsProps): Promise<EnvExtensionProps>;
    static loadDynamicPackageDependencies(envExtensionProps: EnvExtensionProps): EnvPackages | undefined;
    static loadDynamicConfig(envExtensionProps: EnvExtensionProps): Record<string, any> | null | undefined;
    static loadFromModelObject(modelObject: EnvExtensionModel & {
        envType: EnvType;
    }): Promise<EnvExtensionProps>;
    static loadFromSerializedModelObject(modelObject: EnvExtensionSerializedModel & {
        envType: EnvType;
    }): Promise<EnvExtensionProps>;
    /**
     * load the compiler/tester according to the following strategies:
     * 1. from component config (bit.json/package.json of the component) if it was written.
     * 2. from component model. an imported component might not have the config written.
     * for author, it's irrelevant, because upon import it's written to consumer config (if changed).
     * 3. from consumer config overrides. (bit.json/package.json of the consumer when this component
     * overrides the general env config).
     * 4. from consumer config.
     */
    static loadFromCorrectSource({ consumerPath, scopePath, componentOrigin, componentFromModel, componentConfig, overrides, workspaceConfig, envType, context, }: {
        consumerPath: string;
        scopePath: string;
        componentOrigin: ComponentOrigin;
        componentFromModel: ConsumerComponent;
        componentConfig: ComponentConfig | undefined;
        overrides: ComponentOverrides;
        workspaceConfig: ILegacyWorkspaceConfig;
        envType: EnvType;
        context?: Record<string, any>;
    }): Promise<EnvExtension | null | undefined>;
    /**
     * are two envs (in the model/scope format) different
     */
    static areEnvsDifferent(envModelA: EnvExtensionModel | null | undefined, envModelB: EnvExtensionModel | null | undefined): boolean;
}
