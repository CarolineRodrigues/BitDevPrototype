"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("core-js/modules/es.promise.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

function _fsContainer() {
  const data = _interopRequireDefault(require("../../legacy-capsule/container/fs-container"));

  _fsContainer = function () {
    return data;
  };

  return data;
}

function _capsule() {
  const data = _interopRequireDefault(require("../../legacy-capsule/core/capsule"));

  _capsule = function () {
    return data;
  };

  return data;
}

var createCapsule = async function createCapsule(type = 'fs', dir) {
  const containerFactory = getContainerFactory(); // @ts-ignore AUTO-ADDED-AFTER-MIGRATION-PLEASE-FIX!

  const capsule = await _capsule().default.create(containerFactory);
  await capsule.start();
  return capsule;

  function getContainerFactory() {
    switch (type) {
      case 'fs':
      default:
        return async () => new (_fsContainer().default)(dir);
    }
  }
};

exports.default = createCapsule;