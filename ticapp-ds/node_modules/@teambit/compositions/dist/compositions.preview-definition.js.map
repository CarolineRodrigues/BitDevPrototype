{"version":3,"sources":["compositions.preview-definition.ts"],"names":["CompositionPreviewDefinition","constructor","compositions","renderTemplatePath","context","renderTemplatePathByEnv","env","getMounter","getModuleMap","components","map","getPreviewFiles","filter","value","length"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAOO,MAAMA,4BAAN,CAAgE;AAIrEC,EAAAA,WAAW,CAASC,YAAT,EAAyC;AAAA,SAAhCA,YAAgC,GAAhCA,YAAgC;AAAA,oDAHlC,cAGkC;AAAA,0DAF5B,IAE4B;AAAE;;AAE9B,QAAlBC,kBAAkB,CAACC,OAAD,EAA6C;AACnE,WAAO,KAAKC,uBAAL,CAA6BD,OAAO,CAACE,GAArC,CAAP;AACD;;AAE4B,QAAvBD,uBAAuB,CAACC,GAAD,EAAmB;AAC9C,WAAOA,GAAG,CAACC,UAAJ,EAAP;AACD;;AAEiB,QAAZC,YAAY,CAACC,UAAD,EAAkE;AAClF,UAAMC,GAAG,GAAG,KAAKR,YAAL,CAAkBS,eAAlB,CAAkCF,UAAlC,CAAZ;AACA,WAAOC,GAAG,CAACE,MAAJ,CAAYC,KAAD,IAAWA,KAAK,CAACC,MAAN,KAAiB,CAAvC,CAAP;AACD;;AAjBoE","sourcesContent":["import { Component, ComponentMap } from '@teambit/component';\nimport type { ExecutionContext, Environment } from '@teambit/envs';\nimport { PreviewDefinition } from '@teambit/preview';\nimport { AbstractVinyl } from '@teambit/legacy/dist/consumer/component/sources';\n\nimport { CompositionsMain } from './compositions.main.runtime';\n\nexport class CompositionPreviewDefinition implements PreviewDefinition {\n  readonly prefix = 'compositions';\n  readonly includePeers = true;\n\n  constructor(private compositions: CompositionsMain) {}\n\n  async renderTemplatePath(context: ExecutionContext): Promise<string> {\n    return this.renderTemplatePathByEnv(context.env);\n  }\n\n  async renderTemplatePathByEnv(env: Environment) {\n    return env.getMounter();\n  }\n\n  async getModuleMap(components: Component[]): Promise<ComponentMap<AbstractVinyl[]>> {\n    const map = this.compositions.getPreviewFiles(components);\n    return map.filter((value) => value.length !== 0);\n  }\n}\n"]}