{"version":3,"sources":["lint.task.ts"],"names":["LintTask","constructor","aspectId","name","execute","context","linter","env","getLinter","results","lint","componentsResults","map","lintResult","component","metadata","output","errors"],"mappings":";;;;;;;;;AAGO,MAAMA,QAAN,CAAoC;AACzCC,EAAAA,WAAW,CAAUC,QAAV,EAAqCC,IAAI,GAAG,MAA5C,EAAoD;AAAA,SAA1CD,QAA0C,GAA1CA,QAA0C;AAAA,SAAfC,IAAe,GAAfA,IAAe;AAAE;;AAEpD,QAAPC,OAAO,CAACC,OAAD,EAAkD;AAC7D,UAAMC,MAAc,GAAGD,OAAO,CAACE,GAAR,CAAYC,SAAZ,EAAvB;AACA,UAAMC,OAAO,GAAG,MAAMH,MAAM,CAACI,IAAP,CAAYL,OAAZ,CAAtB;AACA,UAAMM,iBAAiB,GAAGF,OAAO,CAACA,OAAR,CAAgBG,GAAhB,CACvBC,UAAD,IAAiC;AAC/B,aAAO;AACLC,QAAAA,SAAS,EAAED,UAAU,CAACC,SADjB;AAELC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,MAAM,EAAEH,UAAU,CAACG,MADX;AAERP,UAAAA,OAAO,EAAEI,UAAU,CAACJ;AAFZ,SAFL;AAMLQ,QAAAA,MAAM,EAAE;AANH,OAAP;AAQD,KAVuB,CAA1B;AAaA,WAAO;AACLN,MAAAA;AADK,KAAP;AAGD;;AAtBwC","sourcesContent":["import { BuildTask, BuiltTaskResult, BuildContext, ComponentResult } from '@teambit/builder';\nimport { Linter } from './linter';\n\nexport class LintTask implements BuildTask {\n  constructor(readonly aspectId: string, readonly name = 'lint') {}\n\n  async execute(context: BuildContext): Promise<BuiltTaskResult> {\n    const linter: Linter = context.env.getLinter();\n    const results = await linter.lint(context);\n    const componentsResults = results.results.map(\n      (lintResult): ComponentResult => {\n        return {\n          component: lintResult.component,\n          metadata: {\n            output: lintResult.output,\n            results: lintResult.results,\n          },\n          errors: [],\n        };\n      }\n    );\n\n    return {\n      componentsResults,\n    };\n  }\n}\n"]}