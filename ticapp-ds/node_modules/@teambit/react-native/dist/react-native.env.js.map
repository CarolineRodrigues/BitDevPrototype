{"version":3,"sources":["react-native.env.ts"],"names":["ReactNativeEnvType","ReactNativeEnv","constructor","react","getHostDependencies","reactAdditional","reactEnv","getAdditionalHostDependencies","currentPeers","Object","keys","getDependencies","peerDependencies","concat","filter","dep","dependencies","devDependencies","__getDescriptor","type"],"mappings":";;;;;;;;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEO,MAAMA,kBAAkB,GAAG,cAA3B;;;AAEA,MAAMC,cAAN,CAA6D;AAClEC,EAAAA,WAAW,CAASC,KAAT,EAA2B;AAAA,SAAlBA,KAAkB,GAAlBA,KAAkB;AAAE;;AAEf,QAAnBC,mBAAmB,GAAG;AAC1B,UAAMC,eAAe,GAAG,MAAM,KAAKF,KAAL,CAAWG,QAAX,CAAoBC,6BAApB,EAA9B;AACA,UAAMC,YAAY,GAAGC,MAAM,CAACC,IAAP,CAAY,KAAKC,eAAL,GAAuBC,gBAAnC,CAArB,CAF0B,CAG1B;;AACA,WAAO,oBAAKP,eAAe,CAACQ,MAAhB,CAAuBL,YAAvB,EAAqCM,MAArC,CAA6CC,GAAD,IAASA,GAAG,KAAK,cAA7D,CAAL,CAAP;AACD;;AAEDJ,EAAAA,eAAe,GAAG;AAChB,WAAO;AACLK,MAAAA,YAAY,EAAE;AACZb,QAAAA,KAAK,EAAE,GADK;AAEZ,qBAAa,GAFD;AAGZ,wBAAgB;AAHJ,OADT;AAMLc,MAAAA,eAAe,EAAE;AACfd,QAAAA,KAAK,EAAE,GADQ;AAEf,qBAAa,GAFE;AAGf,wBAAgB,GAHD;AAIf,uBAAe,SAJA;AAKf,wBAAgB,SALD;AAMf,4BAAoB,SANL;AAOf,+BAAuB,SAPR;AAQf;AACA,0BAAkB,SATH;AAUf,4CAAoC;AAVrB,OANZ;AAkBLS,MAAAA,gBAAgB,EAAE;AAChBT,QAAAA,KAAK,EAAE,oBADS;AAEhB,qBAAa,oBAFG;AAGhB,wBAAgB,SAHA;AAIhB,4BAAoB;AAJJ;AAlBb,KAAP;AAyBD;;AAEoB,QAAfe,eAAe,GAAG;AACtB,WAAO;AACLC,MAAAA,IAAI,EAAEnB;AADD,KAAP;AAGD;;AA1CiE","sourcesContent":["import { Environment, DependenciesEnv } from '@teambit/envs';\nimport type { ReactMain } from '@teambit/react';\nimport { uniq } from 'lodash';\n\nexport const ReactNativeEnvType = 'react-native';\n\nexport class ReactNativeEnv implements Environment, DependenciesEnv {\n  constructor(private react: ReactMain) {}\n\n  async getHostDependencies() {\n    const reactAdditional = await this.react.reactEnv.getAdditionalHostDependencies();\n    const currentPeers = Object.keys(this.getDependencies().peerDependencies);\n    // We filter react-native as we don't want to bundle it to the web\n    return uniq(reactAdditional.concat(currentPeers).filter((dep) => dep !== 'react-native'));\n  }\n\n  getDependencies() {\n    return {\n      dependencies: {\n        react: '-',\n        'react-dom': '-',\n        'react-native': '-',\n      },\n      devDependencies: {\n        react: '-',\n        'react-dom': '-',\n        'react-native': '-',\n        '@types/jest': '^26.0.0',\n        '@types/react': '^17.0.8',\n        '@types/react-dom': '^17.0.5',\n        '@types/react-native': '^0.64.1',\n        // This is added as dev dep since our jest file transformer uses babel plugins that require this to be installed\n        '@babel/runtime': '7.12.18',\n        '@types/testing-library__jest-dom': '5.9.5',\n      },\n      peerDependencies: {\n        react: '^16.8.0 || ^17.0.0',\n        'react-dom': '^16.8.0 || ^17.0.0',\n        'react-native': '^0.64.1',\n        'react-native-web': '^0.16.0',\n      },\n    };\n  }\n\n  async __getDescriptor() {\n    return {\n      type: ReactNativeEnvType,\n    };\n  }\n}\n"]}