{"version":3,"sources":["webpack-transformers.ts"],"names":["reactNativePackagesRule","test","include","loader","require","resolve","options","cacheDirectory","presets","commonTransformation","config","_context","addAliases","react","addModuleRule","previewConfigTransformer","context","newConfig","devServerConfigTransformer"],"mappings":";;;;;;AAEA,MAAMA,uBAAuB,GAAG;AAC9BC,EAAAA,IAAI,EAAE,gBADwB;AAE9BC,EAAAA,OAAO,EAAE,CAAC,6BAAD,CAFqB;AAG9BC,EAAAA,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAgB,cAAhB,CAHsB;AAI9BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,cAAc,EAAE,KADT;AAEPC,IAAAA,OAAO,EAAE,CAACJ,OAAO,CAACC,OAAR,CAAgB,mBAAhB,CAAD,EAAuCD,OAAO,CAACC,OAAR,CAAgB,qBAAhB,CAAvC;AAFF;AAJqB,CAAhC;AAUA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASI,oBAAT,CAA8BC,MAA9B,EAA4DC,QAA5D,EAAqG;AACnGD,EAAAA,MAAM,CACHE,UADH,CACc;AACVC,IAAAA,KAAK,EAAET,OAAO,CAACC,OAAR,CAAgB,OAAhB,CADG;AAEV,wBAAoBD,OAAO,CAACC,OAAR,CAAgB,kBAAhB,CAFV;AAGV,qBAAiBD,OAAO,CAACC,OAAR,CAAgB,kBAAhB;AAHP,GADd,EAMGS,aANH,CAMiBd,uBANjB;AAQA,SAAOU,MAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACO,MAAMK,wBAAkD,GAAG,CAChEL,MADgE,EAEhEM,OAFgE,KAG7D;AACH,QAAMC,SAAS,GAAGR,oBAAoB,CAACC,MAAD,EAASM,OAAT,CAAtC;AACA,SAAOC,SAAP;AACD,CANM;AAQP;AACA;AACA;AACA;AACA;AACA;;;;;AACO,MAAMC,0BAAoD,GAAG,CAClER,MADkE,EAElEM,OAFkE,KAG/D;AACH,QAAMC,SAAS,GAAGR,oBAAoB,CAACC,MAAD,EAASM,OAAT,CAAtC;AACA,SAAOC,SAAP;AACD,CANM","sourcesContent":["import { WebpackConfigTransformer, WebpackConfigMutator, WebpackConfigTransformContext } from '@teambit/webpack';\n\nconst reactNativePackagesRule = {\n  test: /\\.(jsx?|tsx?)$/,\n  include: [/node_modules\\/react-native-/],\n  loader: require.resolve('babel-loader'),\n  options: {\n    cacheDirectory: false,\n    presets: [require.resolve('@babel/preset-env'), require.resolve('@babel/preset-react')],\n  },\n};\n\n/**\n * Transformation to apply for both preview and dev server\n * @param config\n * @param _context\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction commonTransformation(config: WebpackConfigMutator, _context: WebpackConfigTransformContext) {\n  config\n    .addAliases({\n      react: require.resolve('react'),\n      'react-dom/server': require.resolve('react-dom/server'),\n      'react-native$': require.resolve('react-native-web'),\n    })\n    .addModuleRule(reactNativePackagesRule);\n\n  return config;\n}\n\n/**\n * Transformation for the preview only\n * @param config\n * @param context\n * @returns\n */\nexport const previewConfigTransformer: WebpackConfigTransformer = (\n  config: WebpackConfigMutator,\n  context: WebpackConfigTransformContext\n) => {\n  const newConfig = commonTransformation(config, context);\n  return newConfig;\n};\n\n/**\n * Transformation for the dev server only\n * @param config\n * @param context\n * @returns\n */\nexport const devServerConfigTransformer: WebpackConfigTransformer = (\n  config: WebpackConfigMutator,\n  context: WebpackConfigTransformContext\n) => {\n  const newConfig = commonTransformation(config, context);\n  return newConfig;\n};\n"]}