{"version":3,"sources":["resume-export-cmd.ts"],"names":["ResumeExportCmd","constructor","scope","report","exportId","remotes","exportedIds","resumeExport","length","chalk","yellow","join"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAIO,MAAMA,eAAN,CAAyC;AAa9CC,EAAAA,WAAW,CAASC,KAAT,EAA2B;AAAA,SAAlBA,KAAkB,GAAlBA,KAAkB;AAAA,kDAZ/B,wCAY+B;AAAA,8DAXnB,oCAWmB;AAAA,yDAVvB;AACjB;AACA,yGAQwC;AAAA,mDAP9B,EAO8B;AAAA,qDAN5B,EAM4B;AAAA,oDAL7B,IAK6B;AAAA,uDAJ1B,IAI0B;AAAA,mDAH9B,aAG8B;AAAA,sDAF3B,IAE2B;AAAE;;AAE5B,QAANC,MAAM,CAAC,CAACC,QAAD,EAAWC,OAAX,CAAD,EAA2D;AACrE,UAAMC,WAAW,GAAG,MAAM,KAAKJ,KAAL,CAAWK,YAAX,CAAwBH,QAAxB,EAAkCC,OAAlC,CAA1B;AACA,QAAI,CAACC,WAAW,CAACE,MAAjB,EAAyB,OAAOC,iBAAMC,MAAN,CAAa,uDAAb,CAAP;AACzB,WAAQ;AACZ,EAAEJ,WAAW,CAACK,IAAZ,CAAiB,IAAjB,CAAuB,EADrB;AAED;;AApB6C","sourcesContent":["import chalk from 'chalk';\nimport { Command, CommandOptions } from '@teambit/cli';\nimport { ScopeMain } from '@teambit/scope';\n\nexport class ResumeExportCmd implements Command {\n  name = 'resume-export <export-id> <remotes...>';\n  shortDescription = 'EXPERIMENTAL. resume failed export';\n  description = `resume failed export to persist the pending objects on the given remotes.\nthe export-id is the id the client got in the error message during the failure.\nalternatively, exporting to any one of the failed scopes, throws server-is-busy error with the export-id`;\n  alias = '';\n  options = [] as CommandOptions;\n  loader = true;\n  migration = true;\n  group = 'collaborate';\n  remoteOp = true;\n\n  constructor(private scope: ScopeMain) {}\n\n  async report([exportId, remotes]: [string, string[]]): Promise<string> {\n    const exportedIds = await this.scope.resumeExport(exportId, remotes);\n    if (!exportedIds.length) return chalk.yellow('no components were left to persist for this export-id');\n    return `the following components were persisted successfully:\n${exportedIds.join('\\n')}`;\n  }\n}\n"]}