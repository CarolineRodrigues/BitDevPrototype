{"version":3,"sources":["plugin.ts"],"names":["Plugin","constructor","def","path","supportsRuntime","runtime","runtimes","includes","register","object","require","_instance","default"],"mappings":";;;;;;;;;;;;;;;;;;;AAEO,MAAMA,MAAN,CAAa;AAClBC,EAAAA,WAAW,CAAUC,GAAV,EAA0CC,IAA1C,EAAwD;AAAA,SAA9CD,GAA8C,GAA9CA,GAA8C;AAAA,SAAdC,IAAc,GAAdA,IAAc;AAAA;AAAE,GADnD,CAGlB;;;AAGA;AACF;AACA;AACEC,EAAAA,eAAe,CAACC,OAAD,EAAkB;AAC/B,WAAO,KAAKH,GAAL,CAASI,QAAT,CAAkBC,QAAlB,CAA2BF,OAA3B,CAAP;AACD;;AAEDG,EAAAA,QAAQ,GAAG;AACT,UAAMC,MAAM,GAAG,KAAKC,OAAL,EAAf;;AACA,SAAKR,GAAL,CAASM,QAAT,CAA2BC,MAA3B;AACD;;AAEDC,EAAAA,OAAO,GAAG;AACR;AACA,SAAKC,SAAL,GAAiBD,OAAO,CAAC,KAAKP,IAAN,CAAP,CAAmBS,OAApC;AACA,WAAO,KAAKD,SAAZ;AACD;;AAtBiB","sourcesContent":["import { PluginDefinition } from './plugin-definition';\n\nexport class Plugin {\n  constructor(readonly def: PluginDefinition, readonly path: string) {}\n\n  // consider adding a more abstract type here to allow users to ask for dependencies.\n  private _instance: undefined | unknown;\n\n  /**\n   * determines whether the plugin supports a certain runtime.\n   */\n  supportsRuntime(runtime: string) {\n    return this.def.runtimes.includes(runtime);\n  }\n\n  register() {\n    const object = this.require();\n    this.def.register<unknown>(object);\n  }\n\n  require() {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    this._instance = require(this.path).default;\n    return this._instance;\n  }\n}\n"]}