{"version":3,"sources":["compute-results.ts"],"names":["computeResults","context","results","outDirName","storageResolver","result","componentsResults","components","map","component","startTime","endTime","errors","err","message","warning","warnings","artifacts","getArtifactDef","name","globPatterns"],"mappings":";;;;;;;;;AAGO,eAAeA,cAAf,CACLC,OADK,EAELC,OAFK,EAGLC,UAHK,EAILC,eAJK,EAKL;AACA,QAAMC,MAAM,GAAGH,OAAO,CAAC,CAAD,CAAtB;AAEA,QAAMI,iBAAoC,GAAGD,MAAM,CAACE,UAAP,CAAkBC,GAAlB,CAAuBC,SAAD,IAAe;AAChF,WAAO;AACLA,MAAAA,SADK;AAELC,MAAAA,SAAS,EAAEL,MAAM,CAACK,SAFb;AAGLC,MAAAA,OAAO,EAAEN,MAAM,CAACM,OAHX;AAILC,MAAAA,MAAM,EAAEP,MAAM,CAACO,MAAP,CAAcJ,GAAd,CAAmBK,GAAD,IAAU,OAAOA,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgCA,GAAG,CAACC,OAAhE,CAJH;AAKLC,MAAAA,OAAO,EAAEV,MAAM,CAACW;AALX,KAAP;AAOD,GAR4C,CAA7C;AAUA,QAAMC,SAAS,GAAGC,cAAc,CAACf,UAAD,EAAaC,eAAb,CAAhC;AAEA,SAAO;AACLE,IAAAA,iBADK;AAELW,IAAAA;AAFK,GAAP;AAID;;AAED,SAASC,cAAT,CAAwBf,UAAxB,EAA4CC,eAA5C,EAA6G;AAC3G,SAAO,CACL;AACEe,IAAAA,IAAI,EAAE,UADR;AAEEC,IAAAA,YAAY,EAAE,CAAE,GAAEjB,UAAW,YAAf,CAFhB;AAGEC,IAAAA;AAHF,GADK,CAAP;AAOD","sourcesContent":["import { ArtifactDefinition, ArtifactStorageResolver, ComponentResult } from '@teambit/builder';\nimport { BundlerContext, BundlerResult } from '@teambit/bundler';\n\nexport async function computeResults(\n  context: BundlerContext,\n  results: BundlerResult[],\n  outDirName: string,\n  storageResolver?: ArtifactStorageResolver\n) {\n  const result = results[0];\n\n  const componentsResults: ComponentResult[] = result.components.map((component) => {\n    return {\n      component,\n      startTime: result.startTime,\n      endTime: result.endTime,\n      errors: result.errors.map((err) => (typeof err === 'string' ? err : err.message)),\n      warning: result.warnings,\n    };\n  });\n\n  const artifacts = getArtifactDef(outDirName, storageResolver);\n\n  return {\n    componentsResults,\n    artifacts,\n  };\n}\n\nfunction getArtifactDef(outDirName: string, storageResolver?: ArtifactStorageResolver): ArtifactDefinition[] {\n  return [\n    {\n      name: 'elements',\n      globPatterns: [`${outDirName}/public/**`],\n      storageResolver,\n    },\n  ];\n}\n"]}