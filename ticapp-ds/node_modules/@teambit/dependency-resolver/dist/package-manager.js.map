{"version":3,"sources":["package-manager.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA","sourcesContent":["import { PeerDependencyIssuesByProjects } from '@pnpm/core';\nimport { ComponentMap } from '@teambit/component';\nimport { Registries } from './registry';\nimport { DepsFilterFn } from './manifest';\nimport { WorkspacePolicy } from './policy';\nimport { NetworkConfig, ProxyConfig } from './dependency-resolver.main.runtime';\n\nexport { PeerDependencyIssuesByProjects };\n\nexport type PackageImportMethod = 'auto' | 'hardlink' | 'copy' | 'clone';\n\nexport type PackageManagerInstallOptions = {\n  cacheRootDir?: string;\n  /**\n   * decide whether to dedup dependencies.\n   */\n  dedupe?: boolean;\n\n  copyPeerToRuntimeOnRoot?: boolean;\n\n  copyPeerToRuntimeOnComponents?: boolean;\n\n  installPeersFromEnvs?: boolean;\n\n  dependencyFilterFn?: DepsFilterFn;\n\n  overrides?: Record<string, string>;\n\n  nodeLinker?: 'hoisted' | 'isolated';\n\n  packageManagerConfigRootDir?: string;\n\n  packageImportMethod?: PackageImportMethod;\n};\n\nexport type PackageManagerGetPeerDependencyIssuesOptions = PackageManagerInstallOptions;\n\nexport type ResolvedPackageVersion = {\n  packageName: string;\n  version: string | null;\n  isSemver: boolean;\n  resolvedVia?: string;\n};\n\nexport type PackageManagerResolveRemoteVersionOptions = {\n  rootDir: string;\n  cacheRootDir?: string;\n  packageManagerConfigRootDir?: string;\n  // fetchToCache?: boolean;\n  // update?: boolean;\n};\n\nexport interface PackageManager {\n  /**\n   * install dependencies\n   * @param componentDirectoryMap\n   */\n  install(\n    rootDir: string,\n    rootPolicy: WorkspacePolicy,\n    componentDirectoryMap: ComponentMap<string>,\n    options?: PackageManagerInstallOptions\n  ): Promise<void>;\n\n  resolveRemoteVersion(\n    packageName: string,\n    options: PackageManagerResolveRemoteVersionOptions\n  ): Promise<ResolvedPackageVersion>;\n\n  getPeerDependencyIssues?(\n    rootDir: string,\n    rootPolicy: WorkspacePolicy,\n    componentDirectoryMap: ComponentMap<string>,\n    options: PackageManagerGetPeerDependencyIssuesOptions\n  ): Promise<PeerDependencyIssuesByProjects>;\n\n  getRegistries?(): Promise<Registries>;\n\n  getProxyConfig?(): Promise<ProxyConfig>;\n\n  getNetworkConfig?(): Promise<NetworkConfig>;\n}\n"]}