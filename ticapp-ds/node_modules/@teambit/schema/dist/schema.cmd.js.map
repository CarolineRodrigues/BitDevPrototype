{"version":3,"sources":["schema.cmd.ts"],"names":["SchemaCommand","constructor","schema","component","report","idStr","host","getHost","id","resolveComponentId","get","ComponentNotFound","getSchema","toString"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAGO,MAAMA,aAAN,CAAuC;AAM5CC,EAAAA,WAAW,CAASC,MAAT,EAAqCC,SAArC,EAA+D;AAAA,SAAtDD,MAAsD,GAAtDA,MAAsD;AAAA,SAA1BC,SAA0B,GAA1BA,SAA0B;AAAA,kDALnE,aAKmE;AAAA,yDAJ5D,8CAI4D;AAAA,mDAHlE,WAGkE;AAAA,qDAFhE,CAAC,CAAC,GAAD,EAAM,MAAN,EAAc,0CAAd,CAAD,CAEgE;AAAE;;AAEhE,QAANC,MAAM,CAAC,CAACC,KAAD,CAAD,EAAU;AACpB,UAAMC,IAAI,GAAG,KAAKH,SAAL,CAAeI,OAAf,EAAb;AACA,UAAMC,EAAE,GAAG,MAAMF,IAAI,CAACG,kBAAL,CAAwBJ,KAAxB,CAAjB;AACA,UAAMF,SAAS,GAAG,MAAMG,IAAI,CAACI,GAAL,CAASF,EAAT,CAAxB;AACA,QAAI,CAACL,SAAL,EAAgB,MAAM,KAAIQ,0BAAJ,EAAsBH,EAAtB,CAAN;AAEhB,UAAMN,MAAM,GAAG,MAAM,KAAKA,MAAL,CAAYU,SAAZ,CAAsBT,SAAtB,CAArB;AAEA,WAAOD,MAAM,CAACW,QAAP,EAAP;AACD;;AAjB2C","sourcesContent":["import { Command, CommandOptions } from '@teambit/cli';\nimport { ComponentMain } from '@teambit/component';\nimport { ComponentNotFound } from '@teambit/scope';\nimport type { SchemaMain } from './schema.main.runtime';\n\nexport class SchemaCommand implements Command {\n  name = 'schema <id>';\n  description = 'shows the API schema of a certain component.';\n  group = 'component';\n  options = [['j', 'json', 'return the component data in json format']] as CommandOptions;\n\n  constructor(private schema: SchemaMain, private component: ComponentMain) {}\n\n  async report([idStr]) {\n    const host = this.component.getHost();\n    const id = await host.resolveComponentId(idStr);\n    const component = await host.get(id);\n    if (!component) throw new ComponentNotFound(id);\n\n    const schema = await this.schema.getSchema(component);\n\n    return schema.toString();\n  }\n}\n"]}