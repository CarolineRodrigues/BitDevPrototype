{"version":3,"sources":["docs.preview-definition.ts"],"names":["DocsPreviewDefinition","constructor","docs","renderTemplatePath","context","renderTemplatePathByEnv","env","getTemplate","getModuleMap","components","map","getDocsMap","filter","value","length"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAOO,MAAMA,qBAAN,CAAyD;AAK9DC,EAAAA,WAAW;AACT;AACJ;AACA;AACYC,EAAAA,IAJC,EAKT;AAAA,SADQA,IACR,GADQA,IACR;AAAA,oDATgB,UAShB;AAAA,qDARiB,CAAC,cAAD,CAQjB;AAAA,0DAPsB,IAOtB;AAAE;AAEJ;AACF;AACA;;;AAC0B,QAAlBC,kBAAkB,CAACC,OAAD,EAA6C;AACnE,WAAO,KAAKC,uBAAL,CAA6BD,OAAO,CAACE,GAArC,CAAP;AACD;;AAE4B,QAAvBD,uBAAuB,CAACC,GAAD,EAAmB;AAC9C,WAAO,KAAKJ,IAAL,CAAUK,WAAV,CAAsBD,GAAtB,CAAP;AACD;AAED;AACF;AACA;;;AACoB,QAAZE,YAAY,CAACC,UAAD,EAAkE;AAClF,UAAMC,GAAG,GAAG,KAAKR,IAAL,CAAUS,UAAV,CAAqBF,UAArB,CAAZ;AACA,WAAOC,GAAG,CAACE,MAAJ,CAAYC,KAAD,IAAWA,KAAK,CAACC,MAAN,KAAiB,CAAvC,CAAP;AACD;;AA7B6D","sourcesContent":["import { Component, ComponentMap } from '@teambit/component';\nimport type { Environment, ExecutionContext } from '@teambit/envs';\nimport { PreviewDefinition } from '@teambit/preview';\nimport { AbstractVinyl } from '@teambit/legacy/dist/consumer/component/sources';\n\nimport { DocsMain } from './docs.main.runtime';\n\nexport class DocsPreviewDefinition implements PreviewDefinition {\n  readonly prefix = 'overview';\n  readonly include = ['compositions'];\n  readonly includePeers = true;\n\n  constructor(\n    /**\n     * docs extension.\n     */\n    private docs: DocsMain\n  ) {}\n\n  /**\n   * application root\n   */\n  async renderTemplatePath(context: ExecutionContext): Promise<string> {\n    return this.renderTemplatePathByEnv(context.env);\n  }\n\n  async renderTemplatePathByEnv(env: Environment) {\n    return this.docs.getTemplate(env);\n  }\n\n  /**\n   * files to load.\n   */\n  async getModuleMap(components: Component[]): Promise<ComponentMap<AbstractVinyl[]>> {\n    const map = this.docs.getDocsMap(components);\n    return map.filter((value) => value.length !== 0);\n  }\n}\n"]}