{"version":3,"sources":["docs.preview.runtime.tsx"],"names":["DocsPreview","constructor","preview","componentId","modules","compositions","context","docsModule","selectPreviewModel","fullName","mainModule","default","NoopProvider","toString","relevant","componentMap","undefined","provider","docsPreview","registerPreview","name","render","bind","include","PreviewRuntime","PreviewAspect","DocsAspect","addRuntime","children"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAGA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEO,MAAMA,WAAN,CAAkB;AACvBC,EAAAA,WAAW;AACT;AACJ;AACA;AACYC,EAAAA,OAJC,EAKT;AAAA,SADQA,OACR,GADQA,OACR;AAAA,oDAEO,CAACC,WAAD,EAA2BC,OAA3B,EAAmD,CAACC,YAAD,CAAnD,EAA0EC,OAA1E,KAAwG;AAC/G,YAAMC,UAAU,GAAG,KAAKC,kBAAL,CAAwBL,WAAW,CAACM,QAApC,EAA8CL,OAA9C,CAAnB;AAEAA,MAAAA,OAAO,CAACM,UAAR,CAAmBC,OAAnB,CAA2BC,YAA3B,EAAyCT,WAAW,CAACU,QAAZ,EAAzC,EAAiEN,UAAjE,EAA6EF,YAA7E,EAA2FC,OAA3F;AACD,KANC;AAAE;;AAQJE,EAAAA,kBAAkB,CAACL,WAAD,EAAsBC,OAAtB,EAA8C;AAC9D,UAAMU,QAAQ,GAAGV,OAAO,CAACW,YAAR,CAAqBZ,WAArB,CAAjB;AACA,QAAI,CAACW,QAAL,EAAe,OAAOE,SAAP,CAF+C,CAI9D;;AACA,WAAOF,QAAQ,CAAC,CAAD,CAAf;AACD;;AAKoB,eAARG,QAAQ,CAAC,CAACf,OAAD,CAAD,EAA8B;AACjD,UAAMgB,WAAW,GAAG,IAAIlB,WAAJ,CAAgBE,OAAhB,CAApB;AACAA,IAAAA,OAAO,CAACiB,eAAR,CAAwB;AACtBC,MAAAA,IAAI,EAAE,UADgB;AAEtBC,MAAAA,MAAM,EAAEH,WAAW,CAACG,MAAZ,CAAmBC,IAAnB,CAAwBJ,WAAxB,CAFc;AAGtBV,MAAAA,kBAAkB,EAAEU,WAAW,CAACV,kBAAZ,CAA+Bc,IAA/B,CAAoCJ,WAApC,CAHE;AAItBK,MAAAA,OAAO,EAAE,CAAC,cAAD;AAJa,KAAxB;AAOA,WAAOL,WAAP;AACD;;AAnCsB;;;gCAAZlB,W,aAsBMwB,yB;gCAtBNxB,W,kBAuBW,CAACyB,wBAAD,C;;AAexBC,mBAAWC,UAAX,CAAsB3B,WAAtB;;AAEA,SAASY,YAAT,CAAsB;AAAEgB,EAAAA;AAAF,CAAtB,EAA6D;AAC3D,sBAAO,gEAAGA,QAAH,CAAP;AACD","sourcesContent":["import React, { ReactNode } from 'react';\nimport { PreviewAspect, RenderingContext, PreviewPreview, PreviewRuntime, PreviewModule } from '@teambit/preview';\nimport { ComponentID } from '@teambit/component-id';\n\nimport { DocsAspect } from './docs.aspect';\n\nexport class DocsPreview {\n  constructor(\n    /**\n     * preview extension.\n     */\n    private preview: PreviewPreview\n  ) {}\n\n  render = (componentId: ComponentID, modules: PreviewModule, [compositions]: [any], context: RenderingContext) => {\n    const docsModule = this.selectPreviewModel(componentId.fullName, modules);\n\n    modules.mainModule.default(NoopProvider, componentId.toString(), docsModule, compositions, context);\n  };\n\n  selectPreviewModel(componentId: string, modules: PreviewModule) {\n    const relevant = modules.componentMap[componentId];\n    if (!relevant) return undefined;\n\n    // only one doc file is supported.\n    return relevant[0];\n  }\n\n  static runtime = PreviewRuntime;\n  static dependencies = [PreviewAspect];\n\n  static async provider([preview]: [PreviewPreview]) {\n    const docsPreview = new DocsPreview(preview);\n    preview.registerPreview({\n      name: 'overview',\n      render: docsPreview.render.bind(docsPreview),\n      selectPreviewModel: docsPreview.selectPreviewModel.bind(docsPreview),\n      include: ['compositions'],\n    });\n\n    return docsPreview;\n  }\n}\n\nDocsAspect.addRuntime(DocsPreview);\n\nfunction NoopProvider({ children }: { children: ReactNode }) {\n  return <>{children}</>;\n}\n"]}